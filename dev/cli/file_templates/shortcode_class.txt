<?php

if ( class_exists( 'WPBakeryShortCode' ) ) {

	class WPBakeryShortCode_{base} extends WPBakeryShortCode {

		protected function content( $atts, $content = null ) {

			// define path vars
			$shortcode_dir = dirname( __DIR__ );
			$shortcode     = basename( $shortcode_dir );
			$shortcode_uri = \ffblank\helper\utils::get_shortcodes_uri( $shortcode );

			// get shortcode attributes
			$atts = vc_map_get_attributes( $this->getShortcode(), $atts );

			if ( ! empty( $atts['el_id'] ) ) {
				$id = 'shortcode-' . $atts['el_id'];
			} else {
				$id = '';
			}


			// collect data for shortcode view
			$data = array(
				'id'      => $id,
				'atts'    => $atts,
			);

			// display shortcode template
			return FFBLANK()->view->load( '/view/view', $data, true, $shortcode_dir );

		}

	}
}
